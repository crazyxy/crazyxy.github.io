<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><script src="https://use.fontawesome.com/adaf0e149c.js"></script><link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.6.0/styles/monokai_sublime.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="/css/markdown-github.css"><title>Crazyxy is Coding</title><script src="/js/googleAnalytics.js"></script></head><body><div id="postContainer"><div id="postTop"><h4 id="logo">Life Is Short</h4><br><br><h2 id="postTitle">红黑树与AVL树高度计算</h2><br><span aria-hidden="true" class="postTime fa fa-calendar">2016-9-26</span><br><br></div><section id="articleDiv"><p>红黑树和AVL树都是平衡二叉树，高度都是(O(log n))，但是在系数上有区别。本文计算了红黑树与AVL树的高度。</p><br><h2 id="红黑树的高度"><a href="#红黑树的高度" class="headerlink" title="红黑树的高度"></a>红黑树的高度</h2><ul><br><li>红黑树的定义<br>  一棵二叉树是红黑树的充分必要条件是：<ul><br><li>节点是红色或者黑色的</li><br><li>根节点和叶子节点都是黑色的</li><br><li>红色节点的孩子节点必须是黑色的</li><br><li>从根到叶子的每条路径上面黑色的节点个数相等</li><br></ul><br></li><br><li><p>红黑树的高度<br>  (hb(u))为黑色节点的高度，即从(u)到叶子节点的所有黑色节点的个数（不算(u)），(h(u))为(u)节点的高度；</p><br><blockquote><br><p>引理：以(u)为根的子树包含的内部节点个数(n_u\ge 2^{hb(u)}-1)</p><br></blockquote><br><p>  证明：用数学归纳法。(u)为叶子节点，(n_u=0\ge 2^0 - 1)；假设某内部节点(u)，满足(n_u\ge 2^{hb(u)}-1)。设(u)的兄弟节点(r)，对于(u)的父亲节点(v)，(n_v=n_u+n_r\ge 2^{hb(u)} + 2^{hb(r)} -2 + 1)，而(hb(u)\ge hb(v)-1)，(hb(r)\ge hb(v)-1)。所以(n_v\ge 2^{hb(v)-1}+2^{hb(v)-1}-2=2^{hb(v)}-1)。假设得证。</p><br><p>  根据引理，内部节点个数(n\ge 2^{hb(root)}-1)。而(hb(root)\ge \frac{h(root)}{2})。因此(n\ge2^{h(root)/2}-1\Rightarrow h(root)\le2log<em>2(n+1))。</p><br></li><br></ul><br><h2 id="AVL树的高度"><a href="#AVL树的高度" class="headerlink" title="AVL树的高度"></a>AVL树的高度</h2><ul><br><li>AVL树的定义<br>  以(u)为根的二叉树为AVL树的充分必要条件为：<ul><br><li>(u)的左子树和右子树的高度差最多为(1)</li><br><li>(u)的左子树和右子树都是AVL树</li><br></ul><br></li><br><li>AVL树的高度<br>  设(f(h))为高度为(h)的AVL树的最少节点个数。根据AVL树的性质有(f(h)\ge f(h-1)+f(h-2)+1)。令(F(h)=f(h)+1)，则(F(h)=F(h-1)+F(h-2))，(F(0)=1, F(1)=2)。(F(h))的通项公式为$$(F(h)=\frac{1}{\sqrt{5}}\left[\left(\frac{1+\sqrt{5}}{2}\right)^{h+2}-\left(\frac{1-\sqrt{5}}{2}\right)^{h+2}\right]$$<br>高度为(h)的节点数(n\ge f(h)=F(h)-1)。令(\phi=\frac{1+\sqrt{5}}{2})。(F(h)\approx\frac{\phi^{h+2}}{\sqrt{5}})，因为(\phi^n*(1-\phi)^n=1, \phi^n&gt;1\Rightarrow \frac{(1-\phi)^{h+2}}{\sqrt{5}}&lt;\frac{1}{\sqrt{5}})。从而有(n\ge\frac{\phi^{h+2}}{\sqrt{5}}-1\Rightarrow h\le log</em>{\phi}(\sqrt{5}(n+1))-2)。为方便跟红黑树比较，将底换为2，从而(h\le log_\phi(\sqrt{5}(n+1))-2=log_2\frac{\sqrt{5}(n+1)}{log_2\phi}-2\approx1.4404log_2(n+1)-0.3277)</li><br></ul><br><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>综上，AVL树的高度理论上在系数上是小于红黑树的。二者的查找的时间复杂度都是(O(logn))。二分查找的时间复杂度是(\Theta(logn))，理论上要快一点。</p>
</section></div><script src="/js/jquery.min.js"></script><script src="/js/highlight.min.js"></script><script src="/js/start.js"></script></body></html>